<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
</head>

<body style="background: black; text-align: center; margin-top: 4em;">
    <div class="container-fluid">

        <div class="row">
            <div class="col-md-6"><canvas id="lienzo" width="500" height="350"
                    style="border: 1px solid blanchedalmond;">Su navegador no soporta
                    canvas :( </canvas></div>
            <div class="col-md-3" style="color: white;">
                <h5><strong>PID Eje X</strong></h5>
                <form id="formulario_x">
                    <div class="form-group">
                        <label for="kpx">Coeficiente Proporcional [Kp]</label>
                        <input type="number" class="form-control" id="kpx" step="0.001" min="0">
                    </div>
                    <div class="form-group">
                        <label for="kix">Coeficiente Integral [Ki]</label>
                        <input type="number" class="form-control" id="kix" step="0.001" min="0">
                    </div>
                    <div class="form-group">
                        <label for="kdx">Coeficiente Derivativo [Kd]</label>
                        <input type="number" class="form-control" id="kdx" step="0.001" min="0">
                    </div>
                    <button type="submit" class="btn btn-primary">Actualizar</button>
                </form>
            </div>

            <div class="col-md-3" style="color: white;">
                <h5><strong>PID Eje Y</strong></h5>
                <form id="formulario_y">
                    <div class="form-group">
                        <label for="kpy">Coeficiente Proporcional [Kp]</label>
                        <input type="number" class="form-control" id="kpy" step="0.001" min="0">
                    </div>
                    <div class="form-group">
                        <label for="kiy">Coeficiente Integral [Ki]</label>
                        <input type="number" class="form-control" id="kiy" step="0.001" min="0">
                    </div>
                    <div class="form-group">
                        <label for="kdy">Coeficiente Derivativo [Kd]</label>
                        <input type="number" class="form-control" id="kdy" step="0.001" min="0">
                    </div>
                    <button type="submit" class="btn btn-primary">Actualizar</button>
                </form>
            </div>
        </div>

    </div>


    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script>
        var canvas = document.getElementById("lienzo");
        if (canvas && canvas.getContext) {
            var ctx = canvas.getContext("2d");
            if (ctx) {
                var arrastrar = false;
                var delta = new Object();
                var L = 5;
                var paso = 2;
                var R = 25;
                var X = canvas.width / 2;
                var Y = canvas.height / 2;

                function bola(R, L, paso, X, Y) {
                    var r = 10;
                    ctx.strokeStyle = "#006400";
                    // ctx.fillStyle = "#6ab150";
                    ctx.lineWidth = 2;
                    ctx.arc(X, Y, r, 0, 2 * Math.PI);
                    ctx.fill();
                    ctx.stroke();
                }

                bola(R, L, paso, X, Y);

                function oMousePos(canvas, evt) {
                    var rect = canvas.getBoundingClientRect();
                    return { // devuelve un objeto
                        x: Math.round(evt.clientX - rect.left),
                        y: Math.round(evt.clientY - rect.top)
                    };
                }

                canvas.addEventListener("mousedown", function (evt) {
                    var mousePos = oMousePos(canvas, evt);

                    bola(R, L, paso, X, Y);
                    if (ctx.isPointInPath(mousePos.x, mousePos.y)) {
                        arrastrar = true;
                        delta.x = X - mousePos.x;
                        delta.y = Y - mousePos.y;
                    }
                }, false);

                canvas.addEventListener("mousemove", function (evt) {
                    var mousePos = oMousePos(canvas, evt);

                    if (arrastrar) {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        X = mousePos.x + delta.x, Y = mousePos.y + delta.y

                        bola(R, L, paso, X, Y);
                    }
                }, false);

                canvas.addEventListener("mouseup", function (evt) {
                    arrastrar = false;
                }, false);
            }
        }
    </script>
</body>

</html>